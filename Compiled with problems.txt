Compiled with problems:
×
ERROR in src/components/Dashboard/ModernDashboard.tsx:1203:84
TS2345: Argument of type 'number | undefined' is not assignable to parameter of type 'number'.
  Type 'undefined' is not assignable to type 'number'.
    1201 |       // Filtrar mediciones del nodo seleccionado para todos los tipos
    1202 |       const medicionesDelNodo = umbralNodoSeleccionado === selectedNode?.nodoid
  > 1203 |         ? mediciones.filter(m => m.metricaid === metricId && tiposValidos.includes(m.tipoid))
         |                                                                                    ^^^^^^^^
    1204 |         : (comparisonNode && umbralNodoSeleccionado === comparisonNode.nodoid
    1205 |           ? comparisonMediciones.filter(m => m.metricaid === metricId && tiposValidos.includes(m.tipoid))
    1206 |           : [])
ERROR in src/components/Dashboard/ModernDashboard.tsx:1205:96
TS2345: Argument of type 'number | undefined' is not assignable to parameter of type 'number'.
  Type 'undefined' is not assignable to type 'number'.
    1203 |         ? mediciones.filter(m => m.metricaid === metricId && tiposValidos.includes(m.tipoid))
    1204 |         : (comparisonNode && umbralNodoSeleccionado === comparisonNode.nodoid
  > 1205 |           ? comparisonMediciones.filter(m => m.metricaid === metricId && tiposValidos.includes(m.tipoid))
         |                                                                                                ^^^^^^^^
    1206 |           : [])
    1207 |       
    1208 |       // Extraer valores
ERROR in src/components/Dashboard/ModernDashboard.tsx:1421:20
TS2538: Type 'undefined' cannot be used as an index type.
    1419 |     // Inicializar datos para cada tipo
    1420 |     tiposEnMediciones.forEach(tipoid => {
  > 1421 |       datosPorTipo[tipoid] = []
         |                    ^^^^^^
    1422 |     })
    1423 |     
    1424 |     // Decidir granularidad: si hay pocos datos o rango pequeño, usar minutos; si hay muchos datos, usar horas/días
ERROR in src/components/Dashboard/ModernDashboard.tsx:1457:42
TS2538: Type 'undefined' cannot be used as an index type.
    1455 |       
    1456 |       // Buscar si ya existe un punto para este tipo y tiempo
  > 1457 |       const existingPoint = datosPorTipo[medicion.tipoid].find(p => p.time === timeKey)
         |                                          ^^^^^^^^^^^^^^^
    1458 |       
    1459 |       if (existingPoint) {
    1460 |         // Promediar con el valor existente
ERROR in src/components/Dashboard/ModernDashboard.tsx:1457:64
TS7006: Parameter 'p' implicitly has an 'any' type.
    1455 |       
    1456 |       // Buscar si ya existe un punto para este tipo y tiempo
  > 1457 |       const existingPoint = datosPorTipo[medicion.tipoid].find(p => p.time === timeKey)
         |                                                                ^
    1458 |       
    1459 |       if (existingPoint) {
    1460 |         // Promediar con el valor existente
ERROR in src/components/Dashboard/ModernDashboard.tsx:1472:22
TS2538: Type 'undefined' cannot be used as an index type.
    1470 |       } else {
    1471 |         // Crear nuevo punto
  > 1472 |         datosPorTipo[medicion.tipoid].push({
         |                      ^^^^^^^^^^^^^^^
    1473 |           timestamp: date.getTime(),
    1474 |           time: timeKey,
    1475 |           value: medicion.medicion,
ERROR in src/components/Dashboard/ModernDashboard.tsx:1485:24
TS2538: Type 'undefined' cannot be used as an index type.
    1483 |     // Ordenar los datos de cada tipo por timestamp antes de crear la estructura final
    1484 |     tiposEnMediciones.forEach(tipoid => {
  > 1485 |       if (datosPorTipo[tipoid]) {
         |                        ^^^^^^
    1486 |         datosPorTipo[tipoid].sort((a, b) => a.timestamp - b.timestamp)
    1487 |         // Verificar si hay gaps significativos en los datos
    1488 |         if (datosPorTipo[tipoid].length > 1) {
ERROR in src/components/Dashboard/ModernDashboard.tsx:1486:22
TS2538: Type 'undefined' cannot be used as an index type.
    1484 |     tiposEnMediciones.forEach(tipoid => {
    1485 |       if (datosPorTipo[tipoid]) {
  > 1486 |         datosPorTipo[tipoid].sort((a, b) => a.timestamp - b.timestamp)
         |                      ^^^^^^
    1487 |         // Verificar si hay gaps significativos en los datos
    1488 |         if (datosPorTipo[tipoid].length > 1) {
    1489 |           for (let i = 1; i < datosPorTipo[tipoid].length; i++) {
ERROR in src/components/Dashboard/ModernDashboard.tsx:1486:36
TS7006: Parameter 'a' implicitly has an 'any' type.
    1484 |     tiposEnMediciones.forEach(tipoid => {
    1485 |       if (datosPorTipo[tipoid]) {
  > 1486 |         datosPorTipo[tipoid].sort((a, b) => a.timestamp - b.timestamp)
         |                                    ^
    1487 |         // Verificar si hay gaps significativos en los datos
    1488 |         if (datosPorTipo[tipoid].length > 1) {
    1489 |           for (let i = 1; i < datosPorTipo[tipoid].length; i++) {
ERROR in src/components/Dashboard/ModernDashboard.tsx:1486:39
TS7006: Parameter 'b' implicitly has an 'any' type.
    1484 |     tiposEnMediciones.forEach(tipoid => {
    1485 |       if (datosPorTipo[tipoid]) {
  > 1486 |         datosPorTipo[tipoid].sort((a, b) => a.timestamp - b.timestamp)
         |                                       ^
    1487 |         // Verificar si hay gaps significativos en los datos
    1488 |         if (datosPorTipo[tipoid].length > 1) {
    1489 |           for (let i = 1; i < datosPorTipo[tipoid].length; i++) {
ERROR in src/components/Dashboard/ModernDashboard.tsx:1488:26
TS2538: Type 'undefined' cannot be used as an index type.
    1486 |         datosPorTipo[tipoid].sort((a, b) => a.timestamp - b.timestamp)
    1487 |         // Verificar si hay gaps significativos en los datos
  > 1488 |         if (datosPorTipo[tipoid].length > 1) {
         |                          ^^^^^^
    1489 |           for (let i = 1; i < datosPorTipo[tipoid].length; i++) {
    1490 |             const prevTime = datosPorTipo[tipoid][i - 1].timestamp
    1491 |             const currTime = datosPorTipo[tipoid][i].timestamp
ERROR in src/components/Dashboard/ModernDashboard.tsx:1489:44
TS2538: Type 'undefined' cannot be used as an index type.
    1487 |         // Verificar si hay gaps significativos en los datos
    1488 |         if (datosPorTipo[tipoid].length > 1) {
  > 1489 |           for (let i = 1; i < datosPorTipo[tipoid].length; i++) {
         |                                            ^^^^^^
    1490 |             const prevTime = datosPorTipo[tipoid][i - 1].timestamp
    1491 |             const currTime = datosPorTipo[tipoid][i].timestamp
    1492 |             const timeDiff = currTime - prevTime
ERROR in src/components/Dashboard/ModernDashboard.tsx:1490:43
TS2538: Type 'undefined' cannot be used as an index type.
    1488 |         if (datosPorTipo[tipoid].length > 1) {
    1489 |           for (let i = 1; i < datosPorTipo[tipoid].length; i++) {
  > 1490 |             const prevTime = datosPorTipo[tipoid][i - 1].timestamp
         |                                           ^^^^^^
    1491 |             const currTime = datosPorTipo[tipoid][i].timestamp
    1492 |             const timeDiff = currTime - prevTime
    1493 |             // Si hay un gap mayor a 6 horas, es significativo
ERROR in src/components/Dashboard/ModernDashboard.tsx:1491:43
TS2538: Type 'undefined' cannot be used as an index type.
    1489 |           for (let i = 1; i < datosPorTipo[tipoid].length; i++) {
    1490 |             const prevTime = datosPorTipo[tipoid][i - 1].timestamp
  > 1491 |             const currTime = datosPorTipo[tipoid][i].timestamp
         |                                           ^^^^^^
    1492 |             const timeDiff = currTime - prevTime
    1493 |             // Si hay un gap mayor a 6 horas, es significativo
    1494 |             // Comentado para evitar spam en consola - solo activar si es necesario para debugging
ERROR in src/components/Dashboard/ModernDashboard.tsx:1508:22
TS2538: Type 'undefined' cannot be used as an index type.
    1506 |     if (!useCustomRange && filteredMediciones.length > 0) {
    1507 |       const tiposConPocosPuntos = tiposEnMediciones.filter(tipoid => 
  > 1508 |         datosPorTipo[tipoid] && datosPorTipo[tipoid].length <= 2
         |                      ^^^^^^
    1509 |       )
    1510 |       
    1511 |       if (tiposConPocosPuntos.length === tiposEnMediciones.length && tiposEnMediciones.length > 0) {
ERROR in src/components/Dashboard/ModernDashboard.tsx:1508:46
TS2538: Type 'undefined' cannot be used as an index type.
    1506 |     if (!useCustomRange && filteredMediciones.length > 0) {
    1507 |       const tiposConPocosPuntos = tiposEnMediciones.filter(tipoid => 
  > 1508 |         datosPorTipo[tipoid] && datosPorTipo[tipoid].length <= 2
         |                                              ^^^^^^
    1509 |       )
    1510 |       
    1511 |       if (tiposConPocosPuntos.length === tiposEnMediciones.length && tiposEnMediciones.length > 0) {
ERROR in src/components/Dashboard/ModernDashboard.tsx:1519:33
TS2538: Type 'undefined' cannot be used as an index type.
    1517 |           const datosPorTipoMinutos: { [tipoid: number]: any[] } = {}
    1518 |           tiposEnMediciones.forEach(tipoid => {
  > 1519 |             datosPorTipoMinutos[tipoid] = []
         |                                 ^^^^^^
    1520 |           })
    1521 |           
    1522 |           filteredMediciones.forEach(medicion => {
ERROR in src/components/Dashboard/ModernDashboard.tsx:1530:38
TS2538: Type 'undefined' cannot be used as an index type.
    1528 |             const timeKey = `${hour}:${minute}`
    1529 |             
  > 1530 |             if (!datosPorTipoMinutos[medicion.tipoid]) {
         |                                      ^^^^^^^^^^^^^^^
    1531 |               datosPorTipoMinutos[medicion.tipoid] = []
    1532 |             }
    1533 |             
ERROR in src/components/Dashboard/ModernDashboard.tsx:1531:35
TS2538: Type 'undefined' cannot be used as an index type.
    1529 |             
    1530 |             if (!datosPorTipoMinutos[medicion.tipoid]) {
  > 1531 |               datosPorTipoMinutos[medicion.tipoid] = []
         |                                   ^^^^^^^^^^^^^^^
    1532 |             }
    1533 |             
    1534 |             const existingPoint = datosPorTipoMinutos[medicion.tipoid].find(p => p.time === timeKey)
ERROR in src/components/Dashboard/ModernDashboard.tsx:1534:55
TS2538: Type 'undefined' cannot be used as an index type.
    1532 |             }
    1533 |             
  > 1534 |             const existingPoint = datosPorTipoMinutos[medicion.tipoid].find(p => p.time === timeKey)
         |                                                       ^^^^^^^^^^^^^^^
    1535 |             
    1536 |             if (existingPoint) {
    1537 |               const currentValue = existingPoint.value
ERROR in src/components/Dashboard/ModernDashboard.tsx:1534:77
TS7006: Parameter 'p' implicitly has an 'any' type.
    1532 |             }
    1533 |             
  > 1534 |             const existingPoint = datosPorTipoMinutos[medicion.tipoid].find(p => p.time === timeKey)
         |                                                                             ^
    1535 |             
    1536 |             if (existingPoint) {
    1537 |               const currentValue = existingPoint.value
ERROR in src/components/Dashboard/ModernDashboard.tsx:1546:35
TS2538: Type 'undefined' cannot be used as an index type.
    1544 |               }
    1545 |             } else {
  > 1546 |               datosPorTipoMinutos[medicion.tipoid].push({
         |                                   ^^^^^^^^^^^^^^^
    1547 |                 timestamp: date.getTime(),
    1548 |                 time: timeKey,
    1549 |                 value: medicion.medicion,
ERROR in src/components/Dashboard/ModernDashboard.tsx:1559:33
TS2538: Type 'undefined' cannot be used as an index type.
    1557 |           // Verificar si con granularidad de minutos tenemos más puntos
    1558 |           const tiposConMasPuntos = tiposEnMediciones.filter(tipoid => 
  > 1559 |             datosPorTipoMinutos[tipoid] && datosPorTipoMinutos[tipoid].length > 2
         |                                 ^^^^^^
    1560 |           )
    1561 |           
    1562 |           if (tiposConMasPuntos.length > 0) {
ERROR in src/components/Dashboard/ModernDashboard.tsx:1559:64
TS2538: Type 'undefined' cannot be used as an index type.
    1557 |           // Verificar si con granularidad de minutos tenemos más puntos
    1558 |           const tiposConMasPuntos = tiposEnMediciones.filter(tipoid => 
  > 1559 |             datosPorTipoMinutos[tipoid] && datosPorTipoMinutos[tipoid].length > 2
         |                                                                ^^^^^^
    1560 |           )
    1561 |           
    1562 |           if (tiposConMasPuntos.length > 0) {
ERROR in src/components/Dashboard/ModernDashboard.tsx:1565:39
TS2538: Type 'undefined' cannot be used as an index type.
    1563 |             // Usar los datos con granularidad de minutos
    1564 |             tiposEnMediciones.forEach(tipoid => {
  > 1565 |               if (datosPorTipoMinutos[tipoid]) {
         |                                       ^^^^^^
    1566 |                 datosPorTipoMinutos[tipoid].sort((a, b) => a.timestamp - b.timestamp)
    1567 |                 datosPorTipo[tipoid] = datosPorTipoMinutos[tipoid]
    1568 |               }
ERROR in src/components/Dashboard/ModernDashboard.tsx:1566:37
TS2538: Type 'undefined' cannot be used as an index type.
    1564 |             tiposEnMediciones.forEach(tipoid => {
    1565 |               if (datosPorTipoMinutos[tipoid]) {
  > 1566 |                 datosPorTipoMinutos[tipoid].sort((a, b) => a.timestamp - b.timestamp)
         |                                     ^^^^^^
    1567 |                 datosPorTipo[tipoid] = datosPorTipoMinutos[tipoid]
    1568 |               }
    1569 |             })
ERROR in src/components/Dashboard/ModernDashboard.tsx:1566:51
TS7006: Parameter 'a' implicitly has an 'any' type.
    1564 |             tiposEnMediciones.forEach(tipoid => {
    1565 |               if (datosPorTipoMinutos[tipoid]) {
  > 1566 |                 datosPorTipoMinutos[tipoid].sort((a, b) => a.timestamp - b.timestamp)
         |                                                   ^
    1567 |                 datosPorTipo[tipoid] = datosPorTipoMinutos[tipoid]
    1568 |               }
    1569 |             })
ERROR in src/components/Dashboard/ModernDashboard.tsx:1566:54
TS7006: Parameter 'b' implicitly has an 'any' type.
    1564 |             tiposEnMediciones.forEach(tipoid => {
    1565 |               if (datosPorTipoMinutos[tipoid]) {
  > 1566 |                 datosPorTipoMinutos[tipoid].sort((a, b) => a.timestamp - b.timestamp)
         |                                                      ^
    1567 |                 datosPorTipo[tipoid] = datosPorTipoMinutos[tipoid]
    1568 |               }
    1569 |             })
ERROR in src/components/Dashboard/ModernDashboard.tsx:1567:30
TS2538: Type 'undefined' cannot be used as an index type.
    1565 |               if (datosPorTipoMinutos[tipoid]) {
    1566 |                 datosPorTipoMinutos[tipoid].sort((a, b) => a.timestamp - b.timestamp)
  > 1567 |                 datosPorTipo[tipoid] = datosPorTipoMinutos[tipoid]
         |                              ^^^^^^
    1568 |               }
    1569 |             })
    1570 |           } else {
ERROR in src/components/Dashboard/ModernDashboard.tsx:1567:60
TS2538: Type 'undefined' cannot be used as an index type.
    1565 |               if (datosPorTipoMinutos[tipoid]) {
    1566 |                 datosPorTipoMinutos[tipoid].sort((a, b) => a.timestamp - b.timestamp)
  > 1567 |                 datosPorTipo[tipoid] = datosPorTipoMinutos[tipoid]
         |                                                            ^^^^^^
    1568 |               }
    1569 |             })
    1570 |           } else {
ERROR in src/components/Dashboard/ModernDashboard.tsx:1586:20
TS2538: Type 'undefined' cannot be used as an index type.
    1584 |     const allTimeStamps = new Set<number>()
    1585 |     tiposEnMediciones.forEach(tipoid => {
  > 1586 |       datosPorTipo[tipoid].forEach(point => {
         |                    ^^^^^^
    1587 |         // Obtener el timestamp del inicio del período según la granularidad
    1588 |         const date = new Date(point.timestamp)
    1589 |         let periodStart: Date
ERROR in src/components/Dashboard/ModernDashboard.tsx:1586:36
TS7006: Parameter 'point' implicitly has an 'any' type.
    1584 |     const allTimeStamps = new Set<number>()
    1585 |     tiposEnMediciones.forEach(tipoid => {
  > 1586 |       datosPorTipo[tipoid].forEach(point => {
         |                                    ^^^^^
    1587 |         // Obtener el timestamp del inicio del período según la granularidad
    1588 |         const date = new Date(point.timestamp)
    1589 |         let periodStart: Date
ERROR in src/components/Dashboard/ModernDashboard.tsx:1633:43
TS2538: Type 'undefined' cannot be used as an index type.
    1631 |       const tipo = tipos.find(t => t.tipoid === tipoid)
    1632 |       const tipoName = tipo?.tipo || `Tipo ${tipoid}`
  > 1633 |       const firstDataPoint = datosPorTipo[tipoid]?.find(p => p.value !== null && p.value !== undefined)
         |                                           ^^^^^^
    1634 |       firstValueByType[tipoName] = firstDataPoint ? firstDataPoint.value : null
    1635 |     })
    1636 |     
ERROR in src/components/Dashboard/ModernDashboard.tsx:1633:57
TS7006: Parameter 'p' implicitly has an 'any' type.
    1631 |       const tipo = tipos.find(t => t.tipoid === tipoid)
    1632 |       const tipoName = tipo?.tipo || `Tipo ${tipoid}`
  > 1633 |       const firstDataPoint = datosPorTipo[tipoid]?.find(p => p.value !== null && p.value !== undefined)
         |                                                         ^
    1634 |       firstValueByType[tipoName] = firstDataPoint ? firstDataPoint.value : null
    1635 |     })
    1636 |     
ERROR in src/components/Dashboard/ModernDashboard.tsx:1644:39
TS2538: Type 'undefined' cannot be used as an index type.
    1642 |         // Buscar el punto más cercano para este tiempo y tipo
    1643 |         // Si no hay punto exacto, buscar el más cercano dentro de un rango razonable
  > 1644 |         const tipoData = datosPorTipo[tipoid].find(p => p.time === time)
         |                                       ^^^^^^
    1645 |         const tipo = tipos.find(t => t.tipoid === tipoid)
    1646 |         const tipoName = tipo?.tipo || `Tipo ${tipoid}`
    1647 |         
ERROR in src/components/Dashboard/ModernDashboard.tsx:1644:52
TS7006: Parameter 'p' implicitly has an 'any' type.
    1642 |         // Buscar el punto más cercano para este tiempo y tipo
    1643 |         // Si no hay punto exacto, buscar el más cercano dentro de un rango razonable
  > 1644 |         const tipoData = datosPorTipo[tipoid].find(p => p.time === time)
         |                                                    ^
    1645 |         const tipo = tipos.find(t => t.tipoid === tipoid)
    1646 |         const tipoName = tipo?.tipo || `Tipo ${tipoid}`
    1647 |         
ERROR in src/components/Dashboard/ModernDashboard.tsx:1656:43
TS2538: Type 'undefined' cannot be used as an index type.
    1654 |         if (value === null && !useCustomRange && firstValueByType[tipoName] !== null) {
    1655 |           // Verificar si este tiempo está antes del primer punto de datos de este tipo
  > 1656 |           const firstPoint = datosPorTipo[tipoid]?.[0]
         |                                           ^^^^^^
    1657 |           if (firstPoint) {
    1658 |             const currentTimeIndex = allTimes.indexOf(time)
    1659 |             const firstTimeIndex = allTimes.indexOf(firstPoint.time)
ERROR in src/components/Dashboard/ModernDashboard.tsx:2358:52
TS2345: Argument of type 'number | undefined' is not assignable to parameter of type 'number'.
  Type 'undefined' is not assignable to type 'number'.
    2356 |                                 const tiposDelNodo = new Set<number>()
    2357 |                                 medicionesDelNodo.forEach(m => {
  > 2358 |                                   tiposDelNodo.add(m.tipoid)
         |                                                    ^^^^^^^^
    2359 |                                 })
    2360 |                                 
    2361 |                                 // Filtrar tipos disponibles que tienen umbrales
ERROR in src/components/Dashboard/ModernDashboard.tsx:2932:40
TS2538: Type 'undefined' cannot be used as an index type.
    2930 |                         const datosPorTipo: { [tipoid: number]: Array<{ timestamp: number; time: string; value: number; count: number; tipoid: number; tipo: string }> } = {}
    2931 |                         tiposEnMediciones.forEach(tipoid => {
  > 2932 |                           datosPorTipo[tipoid] = []
         |                                        ^^^^^^
    2933 |                         })
    2934 |                         
    2935 |                         // Agrupar mediciones por tipo y tiempo (igual que processChartData)
ERROR in src/components/Dashboard/ModernDashboard.tsx:2958:62
TS2538: Type 'undefined' cannot be used as an index type.
    2956 |                           
    2957 |                           // Buscar si ya existe un punto para este tipo y tiempo
  > 2958 |                           const existingPoint = datosPorTipo[medicion.tipoid].find(p => p.time === timeKey)
         |                                                              ^^^^^^^^^^^^^^^
    2959 |                           
    2960 |                           if (existingPoint) {
    2961 |                             const currentValue = existingPoint.value
ERROR in src/components/Dashboard/ModernDashboard.tsx:2958:84
TS7006: Parameter 'p' implicitly has an 'any' type.
    2956 |                           
    2957 |                           // Buscar si ya existe un punto para este tipo y tiempo
  > 2958 |                           const existingPoint = datosPorTipo[medicion.tipoid].find(p => p.time === timeKey)
         |                                                                                    ^
    2959 |                           
    2960 |                           if (existingPoint) {
    2961 |                             const currentValue = existingPoint.value
ERROR in src/components/Dashboard/ModernDashboard.tsx:2970:42
TS2538: Type 'undefined' cannot be used as an index type.
    2968 |                             }
    2969 |                           } else {
  > 2970 |                             datosPorTipo[medicion.tipoid].push({
         |                                          ^^^^^^^^^^^^^^^
    2971 |                               timestamp: date.getTime(),
    2972 |                               time: timeKey,
    2973 |                               value: medicion.medicion,
ERROR in src/components/Dashboard/ModernDashboard.tsx:2983:44
TS2538: Type 'undefined' cannot be used as an index type.
    2981 |                         // Ordenar los datos de cada tipo por timestamp
    2982 |                         tiposEnMediciones.forEach(tipoid => {
  > 2983 |                           if (datosPorTipo[tipoid]) {
         |                                            ^^^^^^
    2984 |                             datosPorTipo[tipoid].sort((a, b) => a.timestamp - b.timestamp)
    2985 |                           }
    2986 |                         })
ERROR in src/components/Dashboard/ModernDashboard.tsx:2984:42
TS2538: Type 'undefined' cannot be used as an index type.
    2982 |                         tiposEnMediciones.forEach(tipoid => {
    2983 |                           if (datosPorTipo[tipoid]) {
  > 2984 |                             datosPorTipo[tipoid].sort((a, b) => a.timestamp - b.timestamp)
         |                                          ^^^^^^
    2985 |                           }
    2986 |                         })
    2987 |                         
ERROR in src/components/Dashboard/ModernDashboard.tsx:2984:56
TS7006: Parameter 'a' implicitly has an 'any' type.
    2982 |                         tiposEnMediciones.forEach(tipoid => {
    2983 |                           if (datosPorTipo[tipoid]) {
  > 2984 |                             datosPorTipo[tipoid].sort((a, b) => a.timestamp - b.timestamp)
         |                                                        ^
    2985 |                           }
    2986 |                         })
    2987 |                         
ERROR in src/components/Dashboard/ModernDashboard.tsx:2984:59
TS7006: Parameter 'b' implicitly has an 'any' type.
    2982 |                         tiposEnMediciones.forEach(tipoid => {
    2983 |                           if (datosPorTipo[tipoid]) {
  > 2984 |                             datosPorTipo[tipoid].sort((a, b) => a.timestamp - b.timestamp)
         |                                                           ^
    2985 |                           }
    2986 |                         })
    2987 |                         
ERROR in src/components/Dashboard/ModernDashboard.tsx:2991:44
TS2538: Type 'undefined' cannot be used as an index type.
    2989 |                         const allTimeStamps = new Set<number>()
    2990 |                         tiposEnMediciones.forEach(tipoid => {
  > 2991 |                           if (datosPorTipo[tipoid]) {
         |                                            ^^^^^^
    2992 |                             datosPorTipo[tipoid].forEach(point => {
    2993 |                               // Calcular el inicio del período para el timeKey
    2994 |                               const periodStart = new Date(point.timestamp)
ERROR in src/components/Dashboard/ModernDashboard.tsx:2992:42
TS2538: Type 'undefined' cannot be used as an index type.
    2990 |                         tiposEnMediciones.forEach(tipoid => {
    2991 |                           if (datosPorTipo[tipoid]) {
  > 2992 |                             datosPorTipo[tipoid].forEach(point => {
         |                                          ^^^^^^
    2993 |                               // Calcular el inicio del período para el timeKey
    2994 |                               const periodStart = new Date(point.timestamp)
    2995 |                               if (useDays) {
ERROR in src/components/Dashboard/ModernDashboard.tsx:2992:58
TS7006: Parameter 'point' implicitly has an 'any' type.
    2990 |                         tiposEnMediciones.forEach(tipoid => {
    2991 |                           if (datosPorTipo[tipoid]) {
  > 2992 |                             datosPorTipo[tipoid].forEach(point => {
         |                                                          ^^^^^
    2993 |                               // Calcular el inicio del período para el timeKey
    2994 |                               const periodStart = new Date(point.timestamp)
    2995 |                               if (useDays) {
ERROR in src/components/Dashboard/ModernDashboard.tsx:3036:54
TS2538: Type 'undefined' cannot be used as an index type.
    3034 |                           tiposEnMediciones.forEach(tipoid => {
    3035 |                             const tipo = tipos.find(t => t.tipoid === tipoid)
  > 3036 |                             if (tipo && datosPorTipo[tipoid]) {
         |                                                      ^^^^^^
    3037 |                               const tipoPoint = datosPorTipo[tipoid].find(p => p.time === time)
    3038 |                               if (tipoPoint) {
    3039 |                                 let value: number | null = tipoPoint.value
ERROR in src/components/Dashboard/ModernDashboard.tsx:3037:62
TS2538: Type 'undefined' cannot be used as an index type.
    3035 |                             const tipo = tipos.find(t => t.tipoid === tipoid)
    3036 |                             if (tipo && datosPorTipo[tipoid]) {
  > 3037 |                               const tipoPoint = datosPorTipo[tipoid].find(p => p.time === time)
         |                                                              ^^^^^^
    3038 |                               if (tipoPoint) {
    3039 |                                 let value: number | null = tipoPoint.value
    3040 |                                 
ERROR in src/components/Dashboard/ModernDashboard.tsx:3037:75
TS7006: Parameter 'p' implicitly has an 'any' type.
    3035 |                             const tipo = tipos.find(t => t.tipoid === tipoid)
    3036 |                             if (tipo && datosPorTipo[tipoid]) {
  > 3037 |                               const tipoPoint = datosPorTipo[tipoid].find(p => p.time === time)
         |                                                                           ^
    3038 |                               if (tipoPoint) {
    3039 |                                 let value: number | null = tipoPoint.value
    3040 |                                 
ERROR in src/components/Reportes/MetricaPorLoteModal.tsx:156:21
TS2538: Type 'undefined' cannot be used as an index type.
    154 |       const timestamp = fechaObj.getTime();
    155 |       
  > 156 |       if (!timeData[medicion.tipoid]) {
        |                     ^^^^^^^^^^^^^^^
    157 |         timeData[medicion.tipoid] = { sum: 0, count: 0, timestamp };
    158 |       }
    159 |       
ERROR in src/components/Reportes/MetricaPorLoteModal.tsx:157:18
TS2538: Type 'undefined' cannot be used as an index type.
    155 |       
    156 |       if (!timeData[medicion.tipoid]) {
  > 157 |         timeData[medicion.tipoid] = { sum: 0, count: 0, timestamp };
        |                  ^^^^^^^^^^^^^^^
    158 |       }
    159 |       
    160 |       timeData[medicion.tipoid].sum += parseFloat(medicion.medicion.toString());
ERROR in src/components/Reportes/MetricaPorLoteModal.tsx:160:16
TS2538: Type 'undefined' cannot be used as an index type.
    158 |       }
    159 |       
  > 160 |       timeData[medicion.tipoid].sum += parseFloat(medicion.medicion.toString());
        |                ^^^^^^^^^^^^^^^
    161 |       timeData[medicion.tipoid].count += 1;
    162 |       if (timestamp > timeData[medicion.tipoid].timestamp) {
    163 |         timeData[medicion.tipoid].timestamp = timestamp;
ERROR in src/components/Reportes/MetricaPorLoteModal.tsx:161:16
TS2538: Type 'undefined' cannot be used as an index type.
    159 |       
    160 |       timeData[medicion.tipoid].sum += parseFloat(medicion.medicion.toString());
  > 161 |       timeData[medicion.tipoid].count += 1;
        |                ^^^^^^^^^^^^^^^
    162 |       if (timestamp > timeData[medicion.tipoid].timestamp) {
    163 |         timeData[medicion.tipoid].timestamp = timestamp;
    164 |       }
ERROR in src/components/Reportes/MetricaPorLoteModal.tsx:162:32
TS2538: Type 'undefined' cannot be used as an index type.
    160 |       timeData[medicion.tipoid].sum += parseFloat(medicion.medicion.toString());
    161 |       timeData[medicion.tipoid].count += 1;
  > 162 |       if (timestamp > timeData[medicion.tipoid].timestamp) {
        |                                ^^^^^^^^^^^^^^^
    163 |         timeData[medicion.tipoid].timestamp = timestamp;
    164 |       }
    165 |     });
ERROR in src/components/Reportes/MetricaPorLoteModal.tsx:163:18
TS2538: Type 'undefined' cannot be used as an index type.
    161 |       timeData[medicion.tipoid].count += 1;
    162 |       if (timestamp > timeData[medicion.tipoid].timestamp) {
  > 163 |         timeData[medicion.tipoid].timestamp = timestamp;
        |                  ^^^^^^^^^^^^^^^
    164 |       }
    165 |     });
    166 |
ERROR in src/components/Reportes/MetricaPorLoteModal.tsx:417:32
TS2538: Type 'undefined' cannot be used as an index type.
    415 |       
    416 |       filteredMediciones.forEach(m => {
  > 417 |         if (!medicionesPorTipo[m.tipoid]) {
        |                                ^^^^^^^^
    418 |           medicionesPorTipo[m.tipoid] = [];
    419 |         }
    420 |         if (m.medicion != null && !isNaN(m.medicion)) {
ERROR in src/components/Reportes/MetricaPorLoteModal.tsx:418:29
TS2538: Type 'undefined' cannot be used as an index type.
    416 |       filteredMediciones.forEach(m => {
    417 |         if (!medicionesPorTipo[m.tipoid]) {
  > 418 |           medicionesPorTipo[m.tipoid] = [];
        |                             ^^^^^^^^
    419 |         }
    420 |         if (m.medicion != null && !isNaN(m.medicion)) {
    421 |           medicionesPorTipo[m.tipoid].push(m.medicion);
ERROR in src/components/Reportes/MetricaPorLoteModal.tsx:421:29
TS2538: Type 'undefined' cannot be used as an index type.
    419 |         }
    420 |         if (m.medicion != null && !isNaN(m.medicion)) {
  > 421 |           medicionesPorTipo[m.tipoid].push(m.medicion);
        |                             ^^^^^^^^
    422 |         }
    423 |       });
    424 |
ERROR in src/components/Reportes/MetricaPorLoteModal.tsx:669:21
TS2538: Type 'undefined' cannot be used as an index type.
    667 |       const timestamp = fechaObj.getTime();
    668 |       
  > 669 |       if (!timeData[medicion.tipoid]) {
        |                     ^^^^^^^^^^^^^^^
    670 |         timeData[medicion.tipoid] = { sum: 0, count: 0, timestamp };
    671 |       }
    672 |       
ERROR in src/components/Reportes/MetricaPorLoteModal.tsx:670:18
TS2538: Type 'undefined' cannot be used as an index type.
    668 |       
    669 |       if (!timeData[medicion.tipoid]) {
  > 670 |         timeData[medicion.tipoid] = { sum: 0, count: 0, timestamp };
        |                  ^^^^^^^^^^^^^^^
    671 |       }
    672 |       
    673 |       timeData[medicion.tipoid].sum += parseFloat(medicion.medicion.toString());
ERROR in src/components/Reportes/MetricaPorLoteModal.tsx:673:16
TS2538: Type 'undefined' cannot be used as an index type.
    671 |       }
    672 |       
  > 673 |       timeData[medicion.tipoid].sum += parseFloat(medicion.medicion.toString());
        |                ^^^^^^^^^^^^^^^
    674 |       timeData[medicion.tipoid].count += 1;
    675 |       if (timestamp > timeData[medicion.tipoid].timestamp) {
    676 |         timeData[medicion.tipoid].timestamp = timestamp;
ERROR in src/components/Reportes/MetricaPorLoteModal.tsx:674:16
TS2538: Type 'undefined' cannot be used as an index type.
    672 |       
    673 |       timeData[medicion.tipoid].sum += parseFloat(medicion.medicion.toString());
  > 674 |       timeData[medicion.tipoid].count += 1;
        |                ^^^^^^^^^^^^^^^
    675 |       if (timestamp > timeData[medicion.tipoid].timestamp) {
    676 |         timeData[medicion.tipoid].timestamp = timestamp;
    677 |       }
ERROR in src/components/Reportes/MetricaPorLoteModal.tsx:675:32
TS2538: Type 'undefined' cannot be used as an index type.
    673 |       timeData[medicion.tipoid].sum += parseFloat(medicion.medicion.toString());
    674 |       timeData[medicion.tipoid].count += 1;
  > 675 |       if (timestamp > timeData[medicion.tipoid].timestamp) {
        |                                ^^^^^^^^^^^^^^^
    676 |         timeData[medicion.tipoid].timestamp = timestamp;
    677 |       }
    678 |     });
ERROR in src/components/Reportes/MetricaPorLoteModal.tsx:676:18
TS2538: Type 'undefined' cannot be used as an index type.
    674 |       timeData[medicion.tipoid].count += 1;
    675 |       if (timestamp > timeData[medicion.tipoid].timestamp) {
  > 676 |         timeData[medicion.tipoid].timestamp = timestamp;
        |                  ^^^^^^^^^^^^^^^
    677 |       }
    678 |     });
    679 |     
ERROR in src/components/Reportes/MetricaPorLoteModal.tsx:702:48
TS2538: Type 'undefined' cannot be used as an index type.
    700 |         const tipo = tipos.find(t => t.tipoid === tipoid);
    701 |         const tipoNombre = tipo?.tipo || `Tipo ${tipoid}`;
  > 702 |         const tipoDataForTipo = timeDataByTipo[tipoid];
        |                                                ^^^^^^
    703 |         
    704 |         if (tipoDataForTipo && tipoDataForTipo.count > 0) {
    705 |           let promedio = tipoDataForTipo.sum / tipoDataForTipo.count;